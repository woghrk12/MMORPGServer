syntax = "proto3";
package tutorial;

option csharp_namespace = "Google.Protobuf.Protocol";

enum EMessageID
{
    PLAYER_ENTERED_ROOM_RESPONSE = 0;
    PLAYER_ENTERED_ROOM_BRODCAST = 1;
    PLAYER_LEFT_ROOM_RESPONSE = 2;
    PLAYER_LEFT_ROOM_BRODCAST = 3;
    CREATURE_SPAWNED_BRODCAST = 4;
    CREATURE_DESPAWNED_BRODCAST = 5;
    UPDATE_CREATURE_STATE_BROADCAST = 6;
    CREATURE_MOVE_REQUEST = 7;
    CREATURE_MOVE_BRODCAST = 8;
}

enum ECreatureState
{
    IDLE = 0;
    MOVE = 1;
    ATTACK = 2;
    DEAD = 3;
}

message PlayerInfo
{
    int32 playerID = 1;
    string name = 2;
    ECreatureState state = 3;
    int32 posX = 4;
    int32 posY = 5;
}

message PlayerEnteredRoomResponse
{
    PlayerInfo myInfo = 1;
    repeated PlayerInfo otherPlayers = 2;
}

message PlayerEnteredRoomBrodcast
{
    PlayerInfo newPlayer = 1;
}

message PlayerLeftRoomResponse
{

}

message PlayerLeftRoomBrodcast
{
    int32 otherPlayerID = 1;
}

message CreatureSpawnedBrodcast
{
    repeated int32 newObjectIDs = 1;
}

message CreatureDespawnedBrodcast
{
    repeated int32 oldObjectIDs = 1;
}

message UpdateCreatureStateBroadcast 
{
    int32 creatureID = 1;
    ECreatureState state = 2;
}

enum EMoveDirection
{
    NONE = 0;
    UP = 1;
    DOWN = 2;
    LEFT = 3;
    RIGHT = 4;
}

message CreatureMoveCompletedNotify
{
    int32 creatureID = 1;
    int32 posX = 2;
    int32 posY = 3;
}

message CreatureMoveRequest
{
    EMoveDirection moveDirection = 1;
    int32 posX = 2;
    int32 posY = 3;
}

message CreatureMoveBrodcast
{
    int32 creatureID = 1;
    EMoveDirection moveDirection = 2;
    int32 posX = 3;
    int32 posY = 4;
}